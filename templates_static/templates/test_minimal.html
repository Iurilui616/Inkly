<!DOCTYPE html>
<html>
<head>
    <title>Minimal Canvas Test</title>
    <style>
        body { margin: 20px; font-family: Arial; }
        canvas { border: 3px solid black; display: block; background: white; cursor: crosshair; width: 600px; height: 400px; }
        .log { border: 1px solid #ccc; padding: 10px; height: 150px; overflow-y: auto; font-size: 12px; font-family: monospace; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Minimal Canvas Drawing Test</h1>
    <p>Try drawing on the canvas below. Check the log for events.</p>
    
    <canvas id="mycanvas" width="600" height="400"></canvas>
    
    <h3>Events Log:</h3>
    <div class="log" id="log"></div>
    
    <script>
        const canvas = document.getElementById('mycanvas');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        
        function addLog(msg, type = 'info') {
            const logDiv = document.getElementById('log');
            const line = document.createElement('div');
            line.className = type;
            line.textContent = '[' + new Date().toLocaleTimeString() + '] ' + msg;
            logDiv.appendChild(line);
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        // Fill with white
        ctx.fillStyle = '#FFFFFF';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        addLog('Canvas initialized', 'success');
        
        // Test line
        ctx.strokeStyle = '#FF0000';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(10, 10);
        ctx.lineTo(100, 100);
        ctx.stroke();
        addLog('Test red line drawn', 'success');
        
        canvas.addEventListener('mousedown', (e) => {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            lastX = e.clientX - rect.left;
            lastY = e.clientY - rect.top;
            addLog('mousedown at (' + lastX + ', ' + lastY + ')', 'success');
        });
        
        canvas.addEventListener('mousemove', (e) => {
            if (!isDrawing) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // Draw line
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(x, y);
            ctx.stroke();
            
            lastX = x;
            lastY = y;
        });
        
        canvas.addEventListener('mouseup', () => {
            if (isDrawing) {
                isDrawing = false;
                addLog('mouseup', 'info');
            }
        });
        
        canvas.addEventListener('mouseleave', () => {
            if (isDrawing) {
                isDrawing = false;
                addLog('mouseleave', 'info');
            }
        });
        
        addLog('Canvas ready for drawing!', 'success');
    </script>
</body>
</html>
